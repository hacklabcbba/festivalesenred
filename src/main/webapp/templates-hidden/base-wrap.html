<!doctype html>
<html class="no-js" lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Foundation | Welcome</title>
  <link rel="stylesheet" href="/css/foundation.css" />
  <link rel="stylesheet" href="/css/fullcalendar.min.css" />
  <link rel="stylesheet" href="/css/gs_styles.css" />
  <link rel="stylesheet" href="/css/ol.css" />
  <link rel="stylesheet" href="/css/foundation-datepicker.css" />
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <script src="/js/vendor/modernizr.js"></script>
  <script src="/js/script.js"></script>
</head>
<body>



<nav role="navigation" data-topbar="" class="top-bar">
  <ul class="title-area">
    <li class="name"><h1><a href="/"><img src="/img/logo_festivalesenred.png"></a></h1></li>
    <li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
  </ul>

  <section class="top-bar-section">
    <ul data-lift="Menu.builder?group=topbar;ul:class=left"></ul>
    <ul data-lift="Menu.builder?group=usertopbar;ul:class=right"></ul>
    <ul class="right">
      <li style="margin-top:-3px;"><a href="http://www.telartes.org.bo" target="_blank">Una propuesta de<img src="/img/telartes.png"/></a></li>
    </ul>
  </section>
</nav>

<div class="off-canvas-wrap" data-offcanvas id="content">

</div>

<script src="/js/foundation.min.js"></script>
<script src="/js/vendor/moment.min.js"></script>
<script src="/js/vendor/fullcalendar.min.js"></script>
<script src="/js/foundation-datepicker.js"></script>
<script>
  $(document).foundation();
</script>
<script>
	var iconFeature = new ol.Feature({
	  geometry: new ol.geom.Point([-7354864, -1889219]),
	  name: 'Festival 1'
	});

	var iconFeature2 = new ol.Feature({
	  geometry: new ol.geom.Point([-7654865, -1889233]),
	  name: 'Festival 2'
	});

	var iconStyle = new ol.style.Style({
	  image: new ol.style.Icon(/** @type {olx.style.IconOptions} */ ({
		anchor: [0.5, 46],
		anchorXUnits: 'fraction',
		anchorYUnits: 'pixels',
		opacity: 0.75,
		src: '/img/marker-icon.png'
	  }))
	});


	iconFeature.setStyle(iconStyle);
	iconFeature2.setStyle(iconStyle);

	var vectorSource = new ol.source.Vector({
	  features: [iconFeature, iconFeature2]
	});

	var vectorLayer = new ol.layer.Vector({
	  source: vectorSource
	});

	var projection = ol.proj.get('EPSG:900913');
	var projectionExtent = projection.getExtent();
	var size = ol.extent.getWidth(projectionExtent) / 256;
	var resolutions = new Array(26);
	var matrixIds = new Array(26);
	for (var z = 0; z < 26; ++z) {
	  // generate resolutions and matrixIds arrays for this WMTS
	  resolutions[z] = size / Math.pow(2, z);
	  matrixIds[z] = 'EPSG:900913:' + z;
	}

	var map = new ol.Map({
	   layers: [
		 new ol.layer.Tile({
			source: new ol.source.OSM()
		 }),
		 vectorLayer
	   ],
	   renderer: 'canvas',
	   target: document.getElementById('map'),
	   view: new ol.View({
		 center: [-7354864, -1889219],
		 zoom: 5
	   })
	});

	//AÃ±adimos un control de zoom

	map.addControl(new ol.control.ZoomSlider());

	var element = document.getElementById('popup');

	var popup = new ol.Overlay({
	  element: element,
	  positioning: 'bottom-center',
	  stopEvent: false
	});
	map.addOverlay(popup);

	// display popup on click
	map.on('click', function(evt) {
	  var feature = map.forEachFeatureAtPixel(evt.pixel,
		  function(feature, layer) {
			return feature;
		  });
	  if (feature) {
		var geometry = feature.getGeometry();
		var coord = geometry.getCoordinates();
		popup.setPosition(coord);
		$(element).popover('destroy');
		$(element).popover({
		  'placement': 'top',
		  'html': true,
		  'content': feature.get('name')
		});
		$(element).popover('show');
	  } else {
		$(element).popover('destroy');
	  }
	});

	map.on('pointermove', function(e) {
	  if (e.dragging) {
		$(element).popover('destroy');
		return;
	  }
	  var pixel = map.getEventPixel(e.originalEvent);
	  var hit = map.hasFeatureAtPixel(pixel);
	  map.getTarget().style.cursor = hit ? 'pointer' : '';
	});


  	</script>
	<script>

        $(document).ready(function() {

            $('#calendar').fullCalendar({
                header: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'month,basicWeek,basicDay'
                },
                defaultDate: '2015-02-12',
                editable: true,
                eventLimit: true, // allow "more" link when too many events
                events: [
                    {
                        title: 'All Day Event',
                        start: '2015-02-01'
                    },
                    {
                        title: 'Long Event',
                        start: '2015-02-07',
                        end: '2015-02-10'
                    },
                    {
                        id: 999,
                        title: 'Repeating Event',
                        start: '2015-02-09T16:00:00'
                    },
                    {
                        id: 999,
                        title: 'Repeating Event',
                        start: '2015-02-16T16:00:00'
                    },
                    {
                        title: 'Conference',
                        start: '2015-02-11',
                        end: '2015-02-13'
                    },
                    {
                        title: 'Meeting',
                        start: '2015-02-12T10:30:00',
                        end: '2015-02-12T12:30:00'
                    },
                    {
                        title: 'Lunch',
                        start: '2015-02-12T12:00:00'
                    },
                    {
                        title: 'Meeting',
                        start: '2015-02-12T14:30:00'
                    },
                    {
                        title: 'Happy Hour',
                        start: '2015-02-12T17:30:00'
                    },
                    {
                        title: 'Dinner',
                        start: '2015-02-12T20:00:00'
                    },
                    {
                        title: 'Birthday Party',
                        start: '2015-02-13T07:00:00'
                    },
                    {
                        title: 'Click for Google',
                        url: 'http://google.com/',
                        start: '2015-02-28'
                    }
                ]
            });

        });

    </script>
</body>
</html>
