<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Foundation | Welcome</title>
    <link rel="stylesheet" href="/css/foundation.css" />
    <link rel="stylesheet" href="/css/gs_styles.css" />
    <link rel="stylesheet" href="/css/ol.css" />
    <script src="/js/vendor/modernizr.js"></script>
  </head>
  <body>
  


  <nav role="navigation" data-topbar="" class="top-bar">
	  <ul class="title-area">
	    <li class="name"><h1><a href="#"><img src="img/logo.png"></a></h1></li>
	    <li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
	  </ul>
  
		<section class="top-bar-section">

	    <ul class="left">
				<li><a href="">Festivaless</a></li>
				<li><a href="">Calendario</a></li>
				<li><a href="">FAQ</a></li>
	    </ul>

	    <ul class="right">
	      <li><a class="button secondary" href="#">Iniciar Sesion</a></li>
	      <li><a class="button" href="#">Registrarse</a></li>
	    </ul>
	  </section>
  </nav>

<div class="off-canvas-wrap" data-offcanvas>
   <div class="inner-wrap">
      <div class="gs-right-btn">
      	<a class="right-off-canvas-toggle right gs-open" href="#" >Buscar</a> <!-- Off Canvas Menu -->
      </div> 
      <aside class="right-off-canvas-menu">
      	<h2>Tipos Festivales</h2>
      	<!-- start accordion -->
				<ul class="accordion" data-accordion>
					<!-- accordion one -->
				  <li class="accordion-navigation">
				    <a href="#panel1a">Categorías</a>
				    <div id="panel1a" class="content active">
							<ul class="gs-canvas-list">
								<li><span class="round red label">A</span> <input type='checkbox' id="ch1" /><label for="ch1"></label> Danza</li>
								<li><span class="round green label">A</span> <input type='checkbox' id="ch2" /><label for="ch2"></label> Danza</li>
								<li><span class="round purple label">A</span> <input type='checkbox' id="ch3" /><label for="ch3"></label> Danza</li>
								<li><span class="round red label">A</span> <input type='checkbox' id="ch4" /><label for="ch4"></label> Danza</li>
								<li><span class="round blue label">T</span> <input type='checkbox' id="ch5" /><label for="ch5"></label> Danza</li>
								<li><span class="round red label">t</span> <input type='checkbox' id="ch6" /><label for="ch6"></label> Danza</li>
								<li><span class="round purple label">A</span> <input type='checkbox' id="ch7" /><label for="ch7"></label> Danza</li>
								<li><span class="round green label">A</span> <input type='checkbox' id="ch8" /><label for="ch8"></label> Danza</li>
								<div class="row">
							    <div class="columns">
							      <label>Otros
							        <input type="text" placeholder="" />
							      </label>
							    </div>
							  </div>
							</ul>
				    </div>
				  </li>

				  <!-- accordion two -->
				  <li class="accordion-navigation">
				    <a href="#panel2a">Ciudad</a>
				    <div id="panel2a" class="content active">
							<div class="row">
						    <div class="columns">
						      <label>
						        <input type="text" placeholder="" />
						      </label>
						    </div>
						  </div>
								<div class="row">
							    <div class="columns">
							      <label>
							        <input type="text" placeholder="" />
							      </label>
							    </div>
							  </div>
				    </div>
				  </li>

				  <!-- accordion three -->
				  <li class="accordion-navigation">
				    <a href="#panel3a">Fechas</a>
				    <div id="panel3a" class="content active">
						  <div class="row">
						    <div class="small-9">
						      <div class="row">
						        <div class="small-3 columns">
						          <label for="right-label" class="right">De</label>
						        </div>
						        <div class="small-8 columns">
						          <input type="text" id="right-label" placeholder="">
						        </div>
						      </div>
						      <div class="row">
						        <div class="small-3 columns">
						          <label for="right-label" class="right">Hasta</label>
						        </div>
						        <div class="small-8 columns">
						          <input type="text" id="right-label" placeholder="">
						        </div>
						      </div>
						    </div>
						  </div>
						  <div class="row">
						  	<button class="button expand gs-btn">Buscar</button>
						  </div>
				    </div>
				  </li>

				</ul>
				<!-- end accordion -->
      </aside>
      <section>
      	<!-- map -->

			  <div id="map">
				  <div id="popup"></div>
			  </div>


      </section>

   </div>
</div>

  	<script src="/js/script.js"></script>
    <script src="/js/foundation.min.js"></script>
    <script>
      $(document).foundation();
    </script>
	<script>
	var iconFeature = new ol.Feature({
	  geometry: new ol.geom.Point([-7354864, -1889219]),
	  name: 'Festival 1'
	});

	var iconFeature2 = new ol.Feature({
	  geometry: new ol.geom.Point([-7654865, -1889233]),
	  name: 'Festival 2'
	});

	var iconStyle = new ol.style.Style({
	  image: new ol.style.Icon(/** @type {olx.style.IconOptions} */ ({
		anchor: [0.5, 46],
		anchorXUnits: 'fraction',
		anchorYUnits: 'pixels',
		opacity: 0.75,
		src: '/img/marker-icon.png'
	  }))
	});


	iconFeature.setStyle(iconStyle);
	iconFeature2.setStyle(iconStyle);

	var vectorSource = new ol.source.Vector({
	  features: [iconFeature, iconFeature2]
	});

	var vectorLayer = new ol.layer.Vector({
	  source: vectorSource
	});

	var projection = ol.proj.get('EPSG:900913');
	var projectionExtent = projection.getExtent();
	var size = ol.extent.getWidth(projectionExtent) / 256;
	var resolutions = new Array(26);
	var matrixIds = new Array(26);
	for (var z = 0; z < 26; ++z) {
	  // generate resolutions and matrixIds arrays for this WMTS
	  resolutions[z] = size / Math.pow(2, z);
	  matrixIds[z] = 'EPSG:900913:' + z;
	}

	var map = new ol.Map({
	   layers: [
		 new ol.layer.Tile({
			source: new ol.source.OSM()
		 }),
		 vectorLayer
	   ],
	   renderer: 'canvas',
	   target: document.getElementById('map'),
	   view: new ol.View({
		 center: [-7354864, -1889219],
		 zoom: 5
	   })
	});

	//Añadimos un control de zoom

	map.addControl(new ol.control.ZoomSlider());

	var element = document.getElementById('popup');

	var popup = new ol.Overlay({
	  element: element,
	  positioning: 'bottom-center',
	  stopEvent: false
	});
	map.addOverlay(popup);

	// display popup on click
	map.on('click', function(evt) {
	  var feature = map.forEachFeatureAtPixel(evt.pixel,
		  function(feature, layer) {
			return feature;
		  });
	  if (feature) {
		var geometry = feature.getGeometry();
		var coord = geometry.getCoordinates();
		popup.setPosition(coord);
		$(element).popover('destroy');
		$(element).popover({
		  'placement': 'top',
		  'html': true,
		  'content': feature.get('name')
		});
		$(element).popover('show');
	  } else {
		$(element).popover('destroy');
	  }
	});

	map.on('pointermove', function(e) {
	  if (e.dragging) {
		$(element).popover('destroy');
		return;
	  }
	  var pixel = map.getEventPixel(e.originalEvent);
	  var hit = map.hasFeatureAtPixel(pixel);
	  map.getTarget().style.cursor = hit ? 'pointer' : '';
	});


  	</script>
</body>
</html>
